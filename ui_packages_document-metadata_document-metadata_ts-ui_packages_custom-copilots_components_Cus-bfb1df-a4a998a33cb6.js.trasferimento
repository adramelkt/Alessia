"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_document-metadata_document-metadata_ts-ui_packages_custom-copilots_components_Cus-bfb1df"],{78904:(e,t,r)=>{r.d(t,{T:()=>u});var i=r(17908),a=r(5796),n=r(46584),l=r(70404),s=r(57572),o=r(96540),c=r(46636);function u(){let{sendAnalyticsEvent:e}=(0,l.s)(),t=function(){let e=function(){let e=(0,i.t)(),t=(0,c.i)();return(0,o.useMemo)(()=>({react_app:"code-view",repository_id:e.id,repository_nwo:`${e.ownerLogin}/${e.name}`,repository_public:e.public,repository_is_fork:e.isFork,actor_id:t?.id,actor_login:t?.login}),[e,t])}(),t=(0,i.t)(),r=(0,a.yH8)(a.tTz,{owner:t.ownerLogin,repo:t.name});return(0,o.useCallback)((t,i,a)=>{let n={target:t,interaction:i,context:a,...e,url:window.location.href,user_agent:window.navigator.userAgent,browser_width:window.innerWidth,browser_languages:window.navigator.languages.join(",")};(0,s.lS)(r,{method:"POST",body:n})},[e,r])}(),r=(0,n.u)("code_nav_ui_events");return{sendRepoClickEvent:(0,o.useCallback)((i,a={})=>{e("repository.click",i,a),r&&t(i,"click",a)},[e,t,r]),sendRepoKeyDownEvent:(0,o.useCallback)((i,a={})=>{e("repository.keydown",i,a),r&&t(i,"keydown",a)},[e,t,r]),sendStats:(0,o.useCallback)((i,a={})=>{e(i,"",a),r&&t(i,"stats",a)},[e,t,r]),sendMarketplaceActionEvent:(0,o.useCallback)((t,r={})=>{e("marketplace.action.click",t,r)},[e])}}},83023:(e,t,r)=>{r.d(t,{o:()=>d});var i=r(5225),a=r(17908),n=r(5796),l=r(57572),s=r(96540);async function o(e){let t=await (0,l.lS)(e);return t.ok?await t.json():void 0}let c=new Map,u=(0,i.A)(o,{cache:c});function d(e,t,r){let i=(0,a.t)(),[l,o]=(0,s.useState)({list:[],directories:[],loading:!0}),c=(0,n.ClY)({repo:i,commitOid:e,includeDirectories:!r});return(0,s.useEffect)(()=>{let e=!1,r=async()=>{o({list:[],directories:[],loading:!0});let t=await u(c);if(e)return;let r=t?.paths||[],i=t?.directories||[];o({list:r.concat(i).sort(),directories:i,error:!t})};return t&&r(),function(){e=!0}},[c,t,r]),l}},38556:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(14194),a=r(17908),n=r(5796),l=r(94232),s=r(96540);function o(){let e=(0,a.t)(),{path:t,action:r,refInfo:o}=(0,i.eu)(),[c]=(0,l.I)(()=>!1,!0,[]);function u(e){return e?`?${e}`:""}function d(e){return c?"":void 0===e?window.location.hash:e?`#${e}`:""}return{getItemUrl:s.useCallback(t=>(0,n.IO9)({repo:e,commitish:o.name,action:"directory"===t.contentType?"tree":"blob",path:t.path}),[e.ownerLogin,e.name,o.name]),getUrl(i={}){let a=(0,n.IO9)({repo:e,commitish:i.commitish||o.name,action:i.action||r,path:i.path||t})+function({params:e,hash:t}){return u(e)+d(t)}(i);return i.absolute?new URL(a,window.location.origin).href:a},createPermalink(i={}){let a=(0,n.IO9)({repo:e,commitish:o.currentOid,action:i.action||r,path:i.path||t})+function({params:e,hash:t}){return u(e)+d(t)}(i);return i.absolute?new URL(a,window.location.origin).href:a},isCurrentPagePermalink:()=>!c&&o.name===o.currentOid&&window.location.pathname.includes(o.currentOid)}}},73412:(e,t,r)=>{function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{z:()=>WebWorker});let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){i(this,"worker",void 0);try{this.worker=new Worker(e)}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};let MainThreadWorker=class MainThreadWorker{async postMessage(e){if(this.terminated)return;let t={data:this.job({data:e})};this.onmessage?.(t)}terminate(){this.terminated=!0}constructor(e){i(this,"terminated",!1),i(this,"onmessage",void 0),this.job=e}}},7911:(e,t,r)=>{r.d(t,{j:()=>l});var i=r(5225),a=r(91385);let n=(0,i.A)(a.fN);function l({data:e}){let{query:t,baseList:r,startTime:i}=e,l=t.replaceAll("\\","");return{query:t,list:r.filter(e=>""===l||(0,a.qA)(l,e)&&n(l,e)>0).sort((e,t)=>n(l,t)-n(l,e)),baseCount:r.length,startTime:i}}},2640:(e,t,r)=>{r.d(t,{D:()=>n,Y:()=>l});var i=r(13080),a=r(47584);function n(e){if(!a.XC)return;let t=a.XC.querySelector("title"),r=a.XC.createElement("title");r.textContent=e,t?t.textContent!==e&&(t.replaceWith(r),(0,i.i)(e)):(a.XC.head.appendChild(r),(0,i.i)(e))}function l(e){return document.body.classList.contains("logged-out")?`${e} \xb7 GitHub`:e}},70404:(e,t,r)=>{r.d(t,{S:()=>s,s:()=>l});var i=r(96540),a=r(46988),n=r(50045);function l(){let e=(0,i.useContext)(n.I);if(!e)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:t,category:r,metadata:l}=e;return{sendAnalyticsEvent:(0,i.useCallback)((e,i,n={})=>{let s={react:!0,app_name:t,category:r,...l};(0,a.BI)(e,{...s,...n,target:i})},[t,r,l])}}function s(){let{sendAnalyticsEvent:e}=l();return{sendClickAnalyticsEvent:(0,i.useCallback)((t={})=>{e("analytics.click",void 0,t)},[e])}}},6262:(e,t,r)=>{r.d(t,{E:()=>n});var i=r(74848),a=r(69197);function n({children:e}){return(0,a.P)()?(0,i.jsx)(i.Fragment,{children:e}):null}try{n.displayName||(n.displayName="AllShortcutsEnabled")}catch{}},69197:(e,t,r)=>{r.d(t,{$:()=>l,P:()=>s});var i=r(74848),a=r(96540);let n=a.createContext(!0);function l({allShortcutsEnabled:e,children:t}){return(0,i.jsxs)(n.Provider,{value:e,children:[" ",t," "]})}function s(){return a.useContext(n)}try{n.displayName||(n.displayName="AllShortcutsEnabledContext")}catch{}try{l.displayName||(l.displayName="AllShortcutsEnabledProvider")}catch{}},23832:(e,t,r)=>{r.d(t,{Ck:()=>s,JS:()=>l});var i=r(74848),a=r(96540);let n=(0,a.createContext)({query:"",setQuery:()=>void 0});function l(){return(0,a.useContext)(n)}function s({children:e}){let[t,r]=(0,a.useState)(""),l=(0,a.useMemo)(()=>({query:t,setQuery:r}),[r,t]);return(0,i.jsx)(n.Provider,{value:l,children:e})}try{n.displayName||(n.displayName="FileQueryContext")}catch{}try{s.displayName||(s.displayName="FileQueryProvider")}catch{}},14194:(e,t,r)=>{r.d(t,{eu:()=>o,qV:()=>s,sq:()=>c});var i=r(74848),a=r(38359),n=r(96540);let l=n.createContext({});function s({children:e,...t}){return(0,i.jsx)(l.Provider,{value:t,children:e})}function o(){return n.useContext(l)}function c(){return(0,a.X)()}try{l.displayName||(l.displayName="FilesPageInfoContext")}catch{}try{s.displayName||(s.displayName="FilesPageInfoProvider")}catch{}},17908:(e,t,r)=>{r.d(t,{d:()=>l,t:()=>s});var i=r(74848),a=r(96540);let n=a.createContext({});function l({repository:e,children:t}){return(0,i.jsxs)(n.Provider,{value:e,children:[" ",t," "]})}function s(){return a.useContext(n)}try{n.displayName||(n.displayName="CurrentRepositoryContext")}catch{}try{l.displayName||(l.displayName="CurrentRepositoryProvider")}catch{}},46636:(e,t,r)=>{r.d(t,{Q:()=>l,i:()=>s});var i=r(74848),a=r(96540);let n=a.createContext(void 0);function l({user:e,children:t}){return(0,i.jsxs)(n.Provider,{value:e,children:[" ",t," "]})}function s(){return a.useContext(n)}try{n.displayName||(n.displayName="CurrentUserContext")}catch{}try{l.displayName||(l.displayName="CurrentUserProvider")}catch{}},15506:(e,t,r)=>{r.d(t,{S:()=>en});var i=r(74848),a=r(31655),n=r(73451),l=r(67138),s=r(51856),o=r(6020),c=r(87330),u=r(55847),d=r(30631),m=r(37827),h=r(56221),p=r(38621),f=r(57572),x=r(96540),y=r(53949),g=r(82610),v=r(26556),b=r(17908),w=r(23832),C=r(14194),j=r(78904),k=r(83023),S=r(38556),N=r(73412),A=r(7911),F=r(69252),R=r(5796),I=r(17774),_=r(41980),E=r(46928),P=r(69676),L=r(82678),T=r(75177),D=r(65481),$=r(8338),G=r(34614),O=r(85349),M=r(63867),W=r(30729),z=r(91385),V=r(70170),q=r(6262),Q=r(47584);let U=x.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:r,ariaHasPopup:a,onBlur:n,onFocus:s,onKeyDown:o,onPreload:c,onSearch:u,query:d,searchPlaceholder:m,sx:h},f)=>{let{sendRepoClickEvent:y}=(0,j.T)(),[g,v]=x.useState(d),b=x.useRef((0,V.s)(e=>u(e),250));x.useEffect(()=>{v(d)},[d]);let w=d?(0,i.jsx)(l.A.Action,{onClick:()=>{y("FILE_TREE.CANCEL_SEARCH"),u("")},icon:p.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,i.jsx)(l.A,{autoFocus:H(),ref:f,value:g,onKeyDown:o,onChange:e=>{v(e.target.value),c(),b.current(e.target.value)},sx:{display:"flex",...h},"aria-label":m||"Go to file","aria-activedescendant":e,role:a?"combobox":void 0,"aria-controls":t,"aria-expanded":r,"aria-haspopup":a?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:m||"Go to file",leadingVisual:p.SearchIcon,trailingAction:w,trailingVisual:w?void 0:()=>(0,i.jsx)(q.E,{children:(0,i.jsx)(T.A,{sx:{mr:"-6px"},children:(0,i.jsx)("kbd",{children:"t"})})}),onFocus:e=>{c(),e.target.select(),s?.(e)},onBlur:n,onClick:()=>y("FILE_TREE.SEARCH_BOX")})});function H(){return"1"===new URLSearchParams(Q.fV.search).get("search")}U.displayName="FilesSearchBox";let K={excludeDirectories:!1,excludeSeeAllResults:!1};function B({actionListSx:e,additionalResults:t,commitOid:r,config:a=K,findFileWorkerPath:n,getItemUrl:l,onRenderRow:s,onItemSelected:o,searchBoxRef:c,sx:u}){let{excludeDirectories:d,excludeSeeAllResults:m}=a,{query:h,setQuery:p}=(0,w.JS)(),f=(0,b.t)(),y=x.useRef(null),g=c??y,[v,I]=x.useState(h.length>0),[M,W]=x.useState(!!h),{list:z,directories:V,loading:q,error:Q}=(0,k.o)(r,v,!!d),{path:B}=(0,C.eu)(),{getUrl:Y}=(0,S.Z)(),{queryText:Z,queryLine:J}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(h),{matches:et,clearMatches:er}=function(e,t,r,i){let[a,n]=x.useState(),l=x.useRef(""),s=x.useRef(),{sendStats:o}=(0,j.T)(),c=x.useRef(!1),u=x.useCallback(()=>{let e=new N.z(r,A.j);e.onmessage=({data:e})=>{c.current=!1,n(e.list),l.current=e.query,e.startTime&&o("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},s.current=e},[o,r]);return x.useEffect(()=>{if(i)return u(),function(){s.current?.terminate()}},[u,i]),x.useEffect(()=>{if(e.length&&t){c.current&&(s.current?.terminate(),u());let r=l.current&&t.startsWith(l.current);c.current=!0,s.current?.postMessage({baseList:r&&a||e,query:t,startTime:performance.now()})}},[e,t,u]),{matches:a,clearMatches:()=>n(void 0)}}((0,x.useMemo)(()=>[...z,...t??[]].sort(),[t,z]),Z,n,v),{sendRepoClickEvent:ei}=(0,j.T)(),ea=(0,E.Z)(),[en,el]=x.useState(0),[es,eo]=x.useState(()=>H()),ec=x.useRef(null),eu=x.useRef(null),ed="file-results-list",{sendRepoKeyDownEvent:em}=(0,j.T)(),{screenSize:eh}=(0,_.lm)(),ep=a.enableOverlay??eh>=_.Gy.large,ef=x.useCallback(e=>{ei("FILE_TREE.SEARCH_RESULT_CLICK"),o?.(e),W(!1)},[ei,o]),ex=(e,t,r)=>l?l(e,t,r):Y({path:e,action:t?"tree":"blob",hash:r}),{containerRef:ey}=(0,L.G)({bindKeys:P.z0.ArrowVertical|P.z0.HomeAndEnd,focusInStrategy:"previous"},[q,Q]);x.useEffect(()=>{h||W(!1)},[h]),x.useEffect(()=>{document.activeElement!==g.current&&ep&&W(!1)},[B,g,ep]);let eg=et?.slice(0,40)||[],ev=et&&et.length>eg.length,eb=!a.disableNavigation,ew=(0,i.jsx)(T.A,{sx:{maxHeight:ep?"60vh":"100% !important",overflowY:"auto",scrollbarGutter:"stable",maxWidth:"100vw","@media (max-width: 768px)":{ml:3,mr:2}},children:Q?(0,i.jsx)(D.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,i.jsxs)($.l,{ref:ey,sx:{overflow:"auto",p:ep?2:3,width:"100%",pr:ep?3:0,pt:ep?3:"2px !important",...e},role:"listbox",children:[!q&&eg.map((e,t)=>{let r=V.includes(e),n=ex(e,r,J?`L${J}`:"");return(0,i.jsx)(ee,{active:e===B,index:t,focused:es&&en===t,match:e,onRender:s,query:Z,onClick:ef,isDirectory:r,to:n,useOverlay:ep,listRef:ey,noAnchor:a.disableNavigation,actionText:a.actionText},e)}),(0,i.jsxs)("div",{className:"m-3 text-center",children:[(0,i.jsx)(X,{loading:q||!et,visibleResultCount:eg.length,truncated:!!ev}),ev&&!m&&(0,i.jsxs)(i.Fragment,{children:["\xa0",(0,i.jsx)(G.A,{id:"see-all-results-link",className:"focus-visible",ref:ec,href:(0,R.Y8Y)({owner:f.ownerLogin,repo:f.name,searchTerm:`path:${Z}`}),sx:es&&en===eg.length?{outline:"2px solid var(--focus-outlineColor, var(--color-accent-fg))",outlineOffset:"-2px",boxShadow:"none"}:{},children:"See all results"})]})]})]})});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.A,{ref:eu,sx:{mx:2,...u},children:(0,i.jsx)(U,{ariaActiveDescendant:(!ep&&h||ep&&M)&&es&&en>-1?ev&&en===eg.length?"see-all-results-link":`file-result-${en}`:void 0,ariaExpanded:ep?M:void 0,ariaHasPopup:ep,ariaControls:ep?ed:void 0,ref:g,query:h,onKeyDown:e=>{let{key:t,shiftKey:r,metaKey:i,altKey:a,ctrlKey:n}=e;if(!r&&!i&&!a){if("Escape"===t)h?(em("FILE_TREE.CANCEL_SEARCH"),p(""),er()):document.activeElement&&document.activeElement.blur();else if(!h)return;else if("Enter"===t){if(!m&&ev&&en===eg.length)eb&&ea((0,R.Y8Y)({owner:f.ownerLogin,repo:f.name,searchTerm:`path:${Z}`})),o?.();else if(eg[en]){let e=eg[en];eb&&ea(ex(eg[en],!1,J?`L${J}`:"")),W(!1),o?.(e)}}else if("ArrowDown"===t||n&&"n"===t){if(!m&&ev&&en>=eg.length-1){if(el(eg.length),ec.current&&ey.current){let e=(0,F.U)(ey.current);(0,P.Rt)(ec.current,e,{behavior:"instant"})}}else el(Math.min(en+1,eg.length-1));e.preventDefault();return}else if("ArrowUp"===t||n&&"p"===t){el(Math.max(en-1,0)),e.preventDefault();return}}},onPreload:()=>I(!0),onSearch:e=>{p(e),e?W(!0):(er(),W(!1)),el(0)},onBlur:e=>{ey.current?.contains(e.relatedTarget)||(W(!1),eo(!1))},onFocus:()=>{h&&W(!0),eo(!0)},searchPlaceholder:a.searchPlaceholder,sx:{minWidth:"160px"}})}),ep&&(0,i.jsx)(O.T,{anchorRef:eu,open:ep&&M,renderAnchor:null,onClose:()=>{W(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},width:"xlarge",align:"end",overlayProps:{id:ed,role:"dialog"},children:ew}),!ep&&h&&ew]})}function X({visibleResultCount:e,truncated:t,loading:r}){return(0,i.jsx)("span",{role:"status",className:r||t||0===e?void 0:"sr-only","aria-label":r?"Loading":void 0,children:r?(0,i.jsx)(M.A,{size:"large"}):0===e?"No matches found":t?`First ${e} files shown.`:`Showing ${e} files.`},"results-count-status")}let Y=({active:e,focused:t,index:r,match:a,query:n,to:l,isDirectory:s,onClick:o,onRender:c,useOverlay:u,listRef:d,noAnchor:m,actionText:h})=>{let p=(0,z.Xq)(n,a);c?.();let f=x.useRef(null);x.useEffect(()=>{if(t&&f.current&&d?.current){let e=(0,F.U)(d.current);(0,P.Rt)(f.current,e,{behavior:"instant"})}},[t,d]);let y={};t&&(y={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let g={id:`file-result-${r}`,active:e,onSelect:(0,x.useCallback)(()=>{o?.(a)},[a,o]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...y},role:"option","data-focus-visible-added":t||void 0,tabIndex:u?-1:0},v=(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,i.jsx)(et,{text:a,positionsList:p,sx:{color:"fg.muted"},LeadingIcon:s?Z:J})}),t&&(0,i.jsx)(T.A,{sx:{pl:1,whiteSpace:"nowrap",color:"fg.muted"},children:m?h:`Go to ${s?"folder":"file"}`})]});return m?(0,x.createElement)($.l.Item,{...g,key:a},v):(0,x.createElement)($.l.Item,{...g,ref:f,as:I.N,to:l,key:a},v)},Z=()=>(0,i.jsx)(W.A,{"aria-label":"Directory",icon:p.FileDirectoryFillIcon,sx:{color:"var(--treeViewItem-leadingVisual-iconColor-rest, var(--color-icon-directory))",mr:2},size:"small"}),J=()=>(0,i.jsx)(W.A,{"aria-label":"File",icon:p.FileIcon,className:"fgColor-muted mr-2",size:"small"}),ee=x.memo(Y);function et({text:e,positionsList:t,sx:r,LeadingIcon:a}){let n=[],l=0;for(let r of t){if(Number(r)!==r||r<l||r>e.length)continue;let t=e.slice(l,r);t&&n.push(er(t)),l=r+1,n.push((0,i.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:e[r]},r))}return n.push(er(e.slice(l))),(0,i.jsx)(T.A,{sx:r,children:(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsx)(a,{}),n]})})}function er(e){return e.replaceAll("/","/\u200B")}try{B.displayName||(B.displayName="FileResultsList")}catch{}try{X.displayName||(X.displayName="FileResultsStatus")}catch{}try{Y.displayName||(Y.displayName="FileResultRow")}catch{}try{Z.displayName||(Z.displayName="DirectoryIcon")}catch{}try{J.displayName||(J.displayName="FileResultIcon")}catch{}try{ee.displayName||(ee.displayName="MemoizedFileResultRow")}catch{}try{et.displayName||(et.displayName="HighlightMatch")}catch{}function ei({formState:e,formData:t,onCancel:r,onSave:a,findFileWorkerPath:s}){let[o,c]=(0,x.useState)(null),[d,m]=(0,x.useState)({}),[h,g]=(0,x.useState)(null),[j,k]=(0,x.useState)(null),[S,N]=(0,x.useState)(t),A=async e=>{let t;if(d[e]){k(t=d[e]);return}try{let r=await (0,f.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!r.ok){g(`Failed to fetch repository details: ${r.status}`);return}t=await r.json(),m(r=>({...r,[e]:t})),k(t)}catch(e){g(e instanceof Error?e.message:"An unknown error occurred")}};async function F(e){let t=await (0,f.lS)(`/_filter/repositories?q=${encodeURIComponent(e)}`);return t.ok?(await t.json()).repositories.map(e=>({name:e.nameWithOwner,enabled:!0,id:e.id})):[]}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Q,{leadingVisual:p.ArrowLeftIcon,variant:"invisible",onClick:r,children:"Back"}),(0,i.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[o&&(0,i.jsx)("span",{children:o}),h&&(0,i.jsx)("span",{children:h}),(0,i.jsx)("h1",{className:"f3",children:"editResourceForm"===e?"Edit GitHub File":"New GitHub File"}),"newResourceForm"===e&&(0,i.jsx)("div",{children:(0,i.jsx)(v.P,{repositoryLoader:F,selectionVariant:"single",selectAllOption:!1,currentSelection:void 0,onSelect:e=>{e&&(N({...S,repositoryId:e.id,nwo:e.name}),A(e.id))},buttonText:S.nwo||"Select repository"})}),j&&(0,i.jsx)(b.d,{repository:j,children:(0,i.jsx)(w.Ck,{children:(0,i.jsxs)(C.qV,{refInfo:{name:j.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:j.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:[(0,i.jsxs)(n.A,{children:[(0,i.jsx)(n.A.Label,{children:"File path"}),(0,i.jsx)(l.A,{block:!0,value:S.filePath||"",onChange:e=>{N({...S,filePath:e.target.value})},...(0,y.G)("resource-file-path-input")})]}),(0,i.jsx)(B,{commitOid:j.commitOID,findFileWorkerPath:s,onItemSelected:e=>{N({...S,filePath:e||""})},config:{enableOverlay:!0,excludeDirectories:!0,disableNavigation:!0,searchPlaceholder:"Select a file",actionText:"Select a file"},sx:{mr:1,ml:1}})]})})}),(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,i.jsx)(u.Q,{onClick:r,children:"Cancel"}),(0,i.jsx)(u.Q,{...(0,y.G)("save-resource-button"),variant:"primary",onClick:()=>{let e=S.repositoryId,t=S.nwo;e&&t?a(S):c("You must select a repository")},children:"Save"})]})]})]})}try{ei.displayName||(ei.displayName="GitHubFileForm")}catch{}let ea={initialForm:"initialForm",editResourceForm:"editResourceForm",newResourceForm:"newResourceForm"};function en({customCopilot:e,findFileWorkerPath:t,immersiveMode:r,updateCustomCopilot:v,closeForm:b}){let[w,C]=(0,x.useState)(e?.name??""),[j,k]=(0,x.useState)(e?.description??""),[S,N]=(0,x.useState)(e?.generalInstructions??""),[A,F]=(0,x.useState)(e?.resources??[]),[R,I]=(0,x.useState)({type:"repository",id:"new-repository-resource"}),[_,E]=(0,x.useState)(1),[P,L]=(0,x.useState)(ea.initialForm),[T,D]=(0,x.useState)(!1),[$,G]=(0,x.useState)(!1),O=P===ea.editResourceForm||P===ea.newResourceForm,[M,W]=(0,x.useState)({}),[z,V]=(0,x.useState)(null),q=A.filter(e=>!e.markedForDestroy),Q=e=>{N(e.target.value)},U=O&&"github_file"===R.type,H=O&&"free_text"===R.type;return(0,i.jsx)(a.M,{containerWidth:"medium",children:(0,i.jsxs)(a.M.Content,{as:"div",children:[P===ea.initialForm&&(0,i.jsx)("form",{onSubmit:B,id:`custom-copilot-form-${e?.id}`,children:(0,i.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[Object.keys(M).length>0&&(0,i.jsx)(m.l,{title:"Failed to save this Copilot Space",variant:"critical",className:"mb-2",...(0,y.G)("error-banner")}),r&&$&&(0,i.jsx)(m.l,{title:"Copilot Space saved successfully",variant:"success",className:"mb-2"}),(0,i.jsxs)(n.A,{required:!0,children:[(0,i.jsx)(n.A.Label,{required:!0,children:"Name"}),(0,i.jsx)(l.A,{block:!0,value:w,...(0,y.G)("name-input"),onChange:e=>C(e.target.value)}),M.name&&(0,i.jsxs)(n.A.Validation,{variant:"error",children:["Name ",M.name]})]}),(0,i.jsxs)(n.A,{children:[(0,i.jsx)(n.A.Label,{children:"Description"}),(0,i.jsx)(l.A,{block:!0,...(0,y.G)("description-input"),value:j,onChange:e=>{k(e.target.value)}})]}),(0,i.jsxs)(n.A,{children:[(0,i.jsx)(n.A.Label,{children:"General Instructions"}),(0,i.jsx)(es,{text:S,promptCharLimit:2e3}),(0,i.jsx)(n.A.Caption,{children:"Describe the main responsibilities, limitations, and expertise areas of the Copilot. Include what tasks it should handle and which ones to avoid."}),(0,i.jsx)(s.Ay,{block:!0,...(0,y.G)("general-instructions-input"),value:S,onChange:e=>{Q(e)}}),M.general_instructions&&(0,i.jsxs)(n.A.Validation,{variant:"error",children:["General instructions ",M.general_instructions]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{id:"resources-title",className:"f5",children:"Resources"}),(0,i.jsx)("p",{id:"resources-subtitle",className:"color-fg-muted f6",children:"Contexts, documents, or repositories that the Copilot uses to give accurate and relevant answers."}),q.length>0&&(0,i.jsx)(h.b,{"aria-labelledby":"resources-title","aria-describedby":"resources-subtitle",data:q,columns:[{header:"Name",rowHeader:!0,id:"id",renderCell:e=>(function(e){switch(e.type){case"repository":case"github_file":return(0,i.jsx)(el,{row:e});case"free_text":return(0,i.jsxs)(d.A,{title:e.name.slice(0,100),maxWidth:300,className:"gap-1 d-flex",children:[(0,i.jsx)(p.FileIcon,{size:16}),e.name]});default:throw Error("Unsupported resource")}})(e)},{id:"actions",header:()=>(0,i.jsx)(o.s,{children:"Actions"}),width:"auto",renderCell:e=>(0,i.jsxs)(i.Fragment,{children:["github_file"!==e.type&&(0,i.jsx)(c.K,{"aria-label":"Edit this resource",title:"Edit this resource",icon:p.PencilIcon,variant:"invisible",onClick:()=>{L(ea.editResourceForm),I({...e})},...(0,y.G)("edit-resource-button")}),(0,i.jsx)(c.K,{"aria-label":"Delete this resource",title:"Delete this resource",icon:p.TrashIcon,variant:"invisible",onClick:()=>{F(A.map(t=>t.id===e.id?{...t,markedForDestroy:!0}:t))}})]})}]})]}),(0,i.jsxs)("div",{className:"gap-1 d-flex",children:[(0,i.jsx)(u.Q,{size:"small",leadingVisual:p.PlusCircleIcon,...(0,y.G)("new-github-file-resource-button"),onClick:()=>{I({id:"new-github-file-resource",type:"github_file",filePath:""}),L(ea.newResourceForm)},children:"Add file from a repository"}),(0,i.jsx)(u.Q,{size:"small",leadingVisual:p.PlusCircleIcon,...(0,y.G)("new-free-text-resource-button"),onClick:()=>{I({id:"new-free-text-resource",type:"free_text"}),L(ea.newResourceForm)},children:"Add text content"})]}),(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[r?(0,i.jsx)(u.Q,{onClick:()=>b?.(),children:"Close"}):(0,i.jsx)(u.Q,{as:"a",href:"/copilot",children:"Cancel"}),(0,i.jsx)(u.Q,{...(0,y.G)("save-custom-copilot-button"),type:"submit",variant:"primary",loading:T,loadingAnnouncement:"Saving Copilot Space",children:"Save"})]})]})},e?.id),U&&(0,i.jsx)(ei,{formState:P,formData:R,onCancel:K,onSave:function(e){let t=e.repositoryId,r=e.nwo;if(!t||!r||!e.filePath){V("Please select a repository and file path");return}F([...A,{id:`newly-created-github-file-resource-${_}`,repositoryId:t,nwo:r,markedForDestroy:!1,filePath:e.filePath,type:"github_file"}]),K()},findFileWorkerPath:t}),H&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Q,{leadingVisual:p.ArrowLeftIcon,variant:"invisible",onClick:()=>K(),children:"Back"}),(0,i.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[z&&(0,i.jsx)(m.l,{variant:"critical",title:z}),(0,i.jsx)("h1",{className:"f3",children:P===ea.editResourceForm?"Edit Text Content":"New Text Content"}),(0,i.jsxs)(n.A,{children:[(0,i.jsx)(n.A.Label,{children:"Name"}),(0,i.jsx)(l.A,{...(0,y.G)("free-text-name"),block:!0,value:R.name||"",onChange:e=>{I({...R,name:e.target.value})}})]}),(0,i.jsxs)(n.A,{children:[(0,i.jsx)(n.A.Label,{children:"Content"}),(0,i.jsx)(es,{text:R.text||"",promptCharLimit:2e4}),(0,i.jsx)(s.Ay,{block:!0,...(0,y.G)("free-text-textarea"),value:R.text,onChange:e=>{I({...R,text:e.target.value})}})]}),(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,i.jsx)(u.Q,{onClick:()=>K(),children:"Cancel"}),(0,i.jsx)(u.Q,{...(0,y.G)("save-resource-button"),variant:"primary",onClick:()=>(function(e){let t=e.text,r=e.name;if(t&&r&&t.length<2e4)P===ea.editResourceForm?F(A.map(i=>i.id===e.id&&"free_text"===i.type?{...i,markedForDestroy:!1,text:t,name:r}:i)):F([...A,{id:`newly-created-free-text-resource-${_}`,markedForDestroy:!1,type:"free_text",name:r,text:t}]),K();else if(t&&t.length>=2e4){V("Text must be shorter");return}else if(void 0===r||""===r)V("Name cannot be blank");else{V("Text cannot be blank");return}})(R),children:"Save"})]})]})]})]})});function K(){L(ea.initialForm),V(null),I({type:"repository",id:"new-repository-resource"}),E(_+1)}async function B(t){if(t?.preventDefault(),T)return;D(!0);let i=e?.id?"PUT":"POST",a=e?.id?`/custom_copilots/${e.id}`:"/custom_copilots",n=g.Jz,l=await (0,f.lS)(a,{method:i,body:{custom_copilot:{name:w,description:j,general_instructions:S,resources_attributes:A.map(e=>({resource_type:e.type,id:e.databaseId,_destroy:e.markedForDestroy,metadata:function(e){switch(e.type){case"repository":return{repository_id:e.repositoryId,file_path_filters:e.filePathFilters?.split("\n").filter(e=>""!==e.trim())};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath};case"free_text":return{text:e.text,name:e.name};default:throw Error("Unsupported resource")}}(e)}))}}});l.ok?r?(D(!1),G(!0),v?.(await l.json())):window.location.href=n:(W((await l.json()).errorMessages),D(!1))}}function el({row:e}){return(0,i.jsxs)("span",{className:"gap-2 d-flex flex-items-end",children:[(0,i.jsx)(p.RepoIcon,{size:16}),(0,i.jsx)("span",{children:e.nwo}),(0,i.jsx)("span",{className:"fgColor-muted text-normal",children:"filePath"in e?e.filePath:e.filePathFilters})]})}function es({text:e,promptCharLimit:t}){let r=(0,i.jsxs)(i.Fragment,{children:[e.length.toLocaleString()," / ",t.toLocaleString()," characters"]});return(0,i.jsx)(i.Fragment,{children:e.length>t?(0,i.jsx)(n.A.Validation,{variant:"error",children:r}):(0,i.jsx)(n.A.Caption,{children:r})})}try{en.displayName||(en.displayName="CustomCopilotForm")}catch{}try{el.displayName||(el.displayName="RepoRowInfo")}catch{}try{es.displayName||(es.displayName="CharacterCount")}catch{}},26556:(e,t,r)=>{r.d(t,{P:()=>u,w:()=>d});var i=r(74848),a=r(96540),n=r(38621),l=r(30631),s=r(55847),o=r(70170),c=r(3893);function u({currentSelection:e,repositoryLoader:t,onSelect:r,selectionVariant:u,selectAllOption:d,additionalButtonProps:m,buttonText:h=""}){let[p,f]=(0,a.useState)(""),[x,y]=(0,a.useState)([]),[g,v]=(0,a.useState)(!0),b=(0,a.useCallback)((0,o.s)(async e=>{try{let r=await t(e);y(r)}catch{}v(!1)},200),[t,y,v]);(0,a.useEffect)(()=>{v(!0),b(p)},[p,b,v]);let w=(0,a.useCallback)(e=>{"single"===u?!e[0]||e[0]._all?r(void 0):r(e[0]):r(e)},[u,r]),C=(0,a.useMemo)(()=>"multiple"===u?e||[]:e?[e]:[],[u,e]),j=(0,a.useCallback)(e=>{let t;return(e.name.length>24&&(t=`${e.name.substring(0,24)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,appendOnly:!1,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,i.jsx)(n.RepoLockedIcon,{size:16}):(0,i.jsx)(n.RepoIcon,{size:16})}},[]),k=(0,a.useCallback)(e=>e.name,[]),S=(0,a.useMemo)(()=>{let e=[];e.push(...x);let t=C.filter(t=>e.every(e=>e.name!==t.name))||[];return e.push(...t),d&&e.push({name:"$all$",_all:!0}),e},[x,d,C]),N=h,A=n.RepoIcon;return N||("multiple"===u?N=C.length>0?`${C.length} repositor${C.length>1?"ies":"y"}`:"Select repositories":C.length>0&&C[0]?(N=C[0].name,A=C[0].private?n.RepoLockedIcon:n.RepoIcon):N=d?"All repositories":"Select a repository"),(0,i.jsx)(c.O,{renderAnchor:({"aria-labelledby":e,...t})=>(0,i.jsx)(s.Q,{leadingVisual:A,trailingAction:n.TriangleDownIcon,"aria-labelledby":` ${e}`,...t,...m,children:(0,i.jsx)(l.A,{title:N,maxWidth:195,children:N})}),placeholderText:"Repos",items:S,loading:g,groups:d?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:u,initialSelectedItems:C,onSelectionChange:w,filterItems:f,getItemKey:k,convertToItemProps:j})}function d(e){return async t=>{let r=t.trim().toLowerCase();return r?e.filter(e=>e.name.toLowerCase().includes(r)||e.name.toLowerCase().includes(r)):e}}try{u.displayName||(u.displayName="ReposSelector")}catch{}},41980:(e,t,r)=>{r.d(t,{Gy:()=>l,LB:()=>u,lm:()=>c,nn:()=>d});var i=r(74848),a=r(70170),n=r(96540);let l={small:1,medium:544,large:768,xlarge:1012,xxlarge:1280,xxxlarge:1350,xxxxlarge:1440},s=[l.xxxxlarge,l.xxxlarge,l.xxlarge,l.xlarge,l.large,l.medium,l.small],o=n.createContext({screenSize:l.small});function c(){return n.useContext(o)}function u({children:e,initialValue:t}){let r=(0,n.useSyncExternalStore)(()=>()=>{},()=>t??d(window.innerWidth),()=>t??l.small),s=(0,n.useRef)(r),[c,u]=(0,n.useState)(r),m=(0,n.useCallback)(()=>{let e=d(window.innerWidth);s.current!==e&&(s.current=e,u(e))},[]);(0,n.useEffect)(()=>{let e=new ResizeObserver((0,a.s)(m));return e.observe(document.documentElement),()=>e.disconnect()},[m]);let h=(0,n.useMemo)(()=>({screenSize:c}),[c]);return(0,i.jsx)(o.Provider,{value:h,children:e})}function d(e){for(let t of s)if(e>=t)return t;return l.small}try{o.displayName||(o.displayName="ScreenContext")}catch{}try{u.displayName||(u.displayName="ScreenSizeProvider")}catch{}}}]);
//# sourceMappingURL=ui_packages_document-metadata_document-metadata_ts-ui_packages_custom-copilots_components_Cus-bfb1df-2437dc97254f.js.map